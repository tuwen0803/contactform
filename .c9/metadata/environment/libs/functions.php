{"filter":false,"title":"functions.php","tooltip":"/libs/functions.php","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":0,"column":28},"action":"insert","lines":["//値を検証する関数やエスケープ処理をする関数のファイル"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":30,"column":1},"action":"insert","lines":["<?php","//エスケープ処理を行う関数","function h($var) {","  if(is_array($var)){","    //$varが配列の場合、h()関数をそれぞれの要素について呼び出す（再帰）","    return array_map('h', $var);","  }else{","    return htmlspecialchars($var, ENT_QUOTES, 'UTF-8');","  }","}"," ","//入力値に不正なデータがないかなどをチェックする関数","function checkInput($var){","  if(is_array($var)){","    return array_map('checkInput', $var);","  }else{","    //NULLバイト攻撃対策","    if(preg_match('/\\0/', $var)){  ","      die('不正な入力です。');","    }","    //文字エンコードのチェック","    if(!mb_check_encoding($var, 'UTF-8')){ ","      die('不正な入力です。');","    }","    //改行、タブ以外の制御文字のチェック","    if(preg_match('/\\A[\\r\\n\\t[:^cntrl:]]*\\z/u', $var) === 0){  ","      die('不正な入力です。制御文字は使用できません。');","    }","    return $var;","  }","}"],"id":3}],[{"start":{"row":32,"column":0},"end":{"row":32,"column":28},"action":"remove","lines":["//値を検証する関数やエスケープ処理をする関数のファイル"],"id":4}],[{"start":{"row":0,"column":5},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":28},"action":"insert","lines":["//値を検証する関数やエスケープ処理をする関数のファイル"],"id":6}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":28},"end":{"row":1,"column":28},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1622651655520,"hash":"d18d7d552139c8af2c65d8a37a6645cb35309299"}